<!DOCTYPE html>
<html lang="en">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Play with Google Play Services - Android Wear - Xizhi Zhu</title>
  <meta property="og:title" content="Play with Google Play Services - Android Wear" />
  <meta name="twitter:title" content="Play with Google Play Services - Android Wear" />
  <meta name="description" content="If you haven’t set up Google Play services yet, please follow this tutorial. Today we demonstrate how to use Android Wear on devices with Android 4.3 or higher and BLE support.
">
  <meta property="og:description" content="If you haven’t set up Google Play services yet, please follow this tutorial. Today we demonstrate how to use Android Wear on devices with Android 4.3 or higher and BLE support.
">
  <meta name="twitter:description" content="If you haven’t set up Google Play services yet, please follow this tutorial. Today we demonstrate how to use Android Wear on devices with Android 4.3 or higher and BLE support.
">
  <meta name="author" content=""/>
  <link href='https://xizzhu.me/images/logo.png' rel='icon' type='image/x-icon'/>
  <meta property="og:image" content="https://xizzhu.me/images/logo.png" />
  <meta name="twitter:image" content="https://xizzhu.me/images/logo.png" />
  <meta name="twitter:card" content="summary" />
  <meta property="og:url" content="https://xizzhu.me/posts/2015-04-20-google-play-services-android-wear/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Xizhi Zhu" />

  <meta name="generator" content="Hugo 0.50" />
  <link rel="alternate" href="https://xizzhu.me/index.xml" type="application/rss+xml" title="Xizhi Zhu">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://xizzhu.me/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" /><link rel="stylesheet" href="https://xizzhu.me/css/syntax.css" /><link rel="stylesheet" href="https://xizzhu.me/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-128400000-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


    <script type="application/ld+json"> {
  "@context" : "http://schema.org",
  "@type" : "BlogPosting",
  
  "name" : "Play with Google Play Services - Android Wear",
  "headline" : "Play with Google Play Services - Android Wear",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://xizzhu.me/posts/2015-04-20-google-play-services-android-wear/"
  },
  "description" : "If you haven’t set up Google Play services yet, please follow this tutorial. Today we demonstrate how to use Android Wear on devices with Android 4.3 or higher and BLE support. ",
  "inLanguage" : "en",
  
  "copyrightYear" : " - 2016",
  "datePublished": "2015-04-20T00:00:00-07:00",
  "dateModified": "2015-04-20T00:00:00-07:00",
  "url" : "https://xizzhu.me/posts/2015-04-20-google-play-services-android-wear/",
  "wordCount" : "711",
  "image" : "https://xizzhu.me/images/logo.png",
  "keywords" : [ "android, google-play-services" ],
  "publisher" : {
    "@type": "Organization",
    "name" : "https://xizzhu.me/",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https://xizzhu.me/images/logo.png",
        "height" :  60 ,
        "width" :  60
    }
  }
} </script>
  
  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://xizzhu.me/">Xizhi Zhu</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Posts" href="/posts">Posts</a>
            </li>
          
        
          
            <li>
              <a title="Bible" href="/bible">Bible</a>
            </li>
          
        
          
            <li>
              <a title="随笔" href="/%e9%9a%8f%e7%ac%94">随笔</a>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="Xizhi Zhu" href="https://xizzhu.me/">
            <img class="avatar-img" src="https://xizzhu.me/images/logo.png" alt="Xizhi Zhu" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="posts-heading">
              
                <h1>Play with Google Play Services - Android Wear</h1>
              
              
                <hr class="small">
              
              
              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <p>If you haven’t set up Google Play services yet, please follow <a href="/posts/2014-02-07-google-play-services-set-up">this tutorial</a>. Today we demonstrate how to use Android Wear on devices with Android 4.3 or higher and BLE support.
</p>

<p>Among others, you will need to add the wearable module to your <em>build.gradle</em> file for both wearable app project and phone app project:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-gradle" data-lang="gradle">compile <span style="color:#e6db74">&#39;com.google.android.gms:play-services-wearable:7.0.0&#39;</span></code></pre></div></p>

<p>Then you should include your wearable app project into your phone app project:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-gradle" data-lang="gradle">debugWearApp <span style="color:#a6e22e">project</span><span style="color:#f92672">(</span>path:<span style="color:#e6db74">&#39;:MyAndroidWear&#39;</span><span style="color:#f92672">,</span> configuration: <span style="color:#e6db74">&#39;debug&#39;</span><span style="color:#f92672">)</span>
releaseWearApp <span style="color:#a6e22e">project</span><span style="color:#f92672">(</span>path:<span style="color:#e6db74">&#39;:MyAndroidWear&#39;</span><span style="color:#f92672">,</span> configuration: <span style="color:#e6db74">&#39;release&#39;</span><span style="color:#f92672">)</span></code></pre></div></p>

<h2 id="basic-wearable-app">Basic wearable app</h2>

<p>Basically, you can run any Android application on your watch, though it has a small display and limited hardware support (e.g. some watch has no GPS support). You can also use the support library provided by Google for some common UI widgets:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-gradle" data-lang="gradle">dependencies <span style="color:#f92672">{</span>
  compile <span style="color:#e6db74">&#39;com.google.android.support:wearable:1.1.0&#39;</span>
<span style="color:#f92672">}</span></code></pre></div></p>

<p>This library also provides the handy way to load a different layout for square or round watches. In your main activity’s layout file:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span style="color:#f92672">&lt;android.support.wearable.view.WatchViewStub</span>
  <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span>
  <span style="color:#a6e22e">xmlns:app=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
  <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/watch_view_stub&#34;</span>
  <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
  <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
  <span style="color:#a6e22e">app:rectLayout=</span><span style="color:#e6db74">&#34;@layout/rect_activity_main&#34;</span>
  <span style="color:#a6e22e">app:roundLayout=</span><span style="color:#e6db74">&#34;@layout/round_activity_main&#34;</span><span style="color:#f92672">/&gt;</span></code></pre></div></p>

<p>The <code>WatchViewStub</code> view will load the corresponding layout based on the shape of the watch. Then in your activity:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Override</span>
<span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onCreate</span><span style="color:#f92672">(</span>Bundle savedInstanceState<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">super</span><span style="color:#f92672">.</span><span style="color:#a6e22e">onCreate</span><span style="color:#f92672">(</span>savedInstanceState<span style="color:#f92672">);</span>
 
  setContentView<span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">layout</span><span style="color:#f92672">.</span><span style="color:#a6e22e">activity_main</span><span style="color:#f92672">);</span>
  WatchViewStub watchViewStub <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>WatchViewStub<span style="color:#f92672">)</span> findViewById<span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">id</span><span style="color:#f92672">.</span> watch_view_stub<span style="color:#f92672">);</span>
  watchViewStub<span style="color:#f92672">.</span><span style="color:#a6e22e">setOnLayoutInflatedListener</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> WatchViewStub<span style="color:#f92672">.</span><span style="color:#a6e22e">OnLayoutInflatedListener</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onLayoutInflated</span><span style="color:#f92672">(</span>WatchViewStub stub<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      <span style="color:#75715e">// the layout is fully inflated
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
  <span style="color:#f92672">});</span>
<span style="color:#f92672">}</span></code></pre></div></p>

<h2 id="send-and-sync-data">Send and sync data</h2>

<p>There are two ways to share data between your phone and watch:</p>

<ul>
<li>Send a specific message to a certain node using the MessageApi.</li>
<li>Share data among all nodes using the DataApi. With this API, the data sent will be synchronized across all connected devices, which means the data will be pushed to a disconnected device if it gets connected later.</li>
</ul>

<p>With both methods, the data are private to the application, so the develop doesn’t need to worry about the privacy nor security.</p>

<h3 id="send-data-with-messageapi">Send data with MessageApi</h3>

<p>Once you have a connected <code>GoogleApiClient</code>, you can use the following code to send a message to a connected node:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// first finds all the connected nodes
</span><span style="color:#75715e"></span>Wearable<span style="color:#f92672">.</span><span style="color:#a6e22e">NodeApi</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getConnectedNodes</span><span style="color:#f92672">(</span>googleApiClient<span style="color:#f92672">).</span><span style="color:#a6e22e">setResultCallback</span><span style="color:#f92672">(</span>
  <span style="color:#66d9ef">new</span> ResultCallback<span style="color:#f92672">&lt;</span>NodeApi<span style="color:#f92672">.</span><span style="color:#a6e22e">GetConnectedNodesResult</span><span style="color:#f92672">&gt;()</span> <span style="color:#f92672">{</span>
    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onResult</span><span style="color:#f92672">(</span>NodeApi<span style="color:#f92672">.</span><span style="color:#a6e22e">GetConnectedNodesResult</span> getConnectedNodesResult<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      List<span style="color:#f92672">&lt;</span>Node<span style="color:#f92672">&gt;</span> nodes <span style="color:#f92672">=</span> getConnectedNodesResult<span style="color:#f92672">.</span><span style="color:#a6e22e">getNodes</span><span style="color:#f92672">();</span>
      <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>nodes<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">()</span> <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// no connected nodes
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
      <span style="color:#f92672">}</span>
      <span style="color:#75715e">// sends a message to the specified path for the first connected node
</span><span style="color:#75715e"></span>      String nodeId <span style="color:#f92672">=</span> nodes<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>0<span style="color:#f92672">).</span><span style="color:#a6e22e">getId</span><span style="color:#f92672">();</span>
      <span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span> data <span style="color:#f92672">=</span> <span style="color:#f92672">...;</span>
      Wearable<span style="color:#f92672">.</span><span style="color:#a6e22e">MessageApi</span><span style="color:#f92672">.</span><span style="color:#a6e22e">sendMessage</span><span style="color:#f92672">(</span>googleApiClient<span style="color:#f92672">,</span> nodeId<span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;/some/random/path&#34;</span><span style="color:#f92672">,</span> data<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
  <span style="color:#f92672">});</span></code></pre></div></p>

<h3 id="sync-data-with-dataapi">Sync data with DataApi</h3>

<p>Once you have a connected <code>GoogleApiClient</code>, you can use the following code to sync data across all connected nodes:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">PutDataMapRequest putDataMapRequest <span style="color:#f92672">=</span> PutDataMapRequest<span style="color:#f92672">.</span><span style="color:#a6e22e">create</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/some/random/path&#34;</span><span style="color:#f92672">);</span>
DataMap dataMap <span style="color:#f92672">=</span> putDataMapRequest<span style="color:#f92672">.</span><span style="color:#a6e22e">getDataMap</span><span style="color:#f92672">();</span>
<span style="color:#75715e">// you can put different data here
</span><span style="color:#75715e"></span>dataMap<span style="color:#f92672">.</span><span style="color:#a6e22e">putLong</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;key 1&#34;</span><span style="color:#f92672">,</span> 12345L<span style="color:#f92672">);</span>
Wearable<span style="color:#f92672">.</span><span style="color:#a6e22e">DataApi</span><span style="color:#f92672">.</span><span style="color:#a6e22e">putDataItem</span><span style="color:#f92672">(</span>googleApiClient<span style="color:#f92672">,</span> putDataMapRequest<span style="color:#f92672">.</span><span style="color:#a6e22e">asPutDataRequest</span><span style="color:#f92672">());</span></code></pre></div></p>

<h3 id="receive-data-with-wearablelistenerservice">Receive data with WearableListenerService</h3>

<p>To receive messages or data updates from other nodes, you must extend the <code>WearableListenerService</code>, whose life cycle is managed by the phone or the watch:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">WearableListener</span> <span style="color:#66d9ef">extends</span> WearableListenerService <span style="color:#f92672">{</span>
  <span style="color:#a6e22e">@Override</span>
  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onMessageReceived</span><span style="color:#f92672">(</span>MessageEvent messageEvent<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// this is called when it receives one single message from
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// a connected node
</span><span style="color:#75715e"></span>  <span style="color:#f92672">}</span>
 
  <span style="color:#a6e22e">@Override</span>
  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onDataChanged</span><span style="color:#f92672">(</span>DataEventBuffer dataEvents<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// this is called when one or more data is created, updated
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// or deleted using the DataApi
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// note:
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 1) if the same data is updated several times, you might
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// only be notified once, with the final state of the data
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 2) it might contain more than one data events
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 3) the provided buffer is only valid till the end of this
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// method
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>DataEvent dataEvent <span style="color:#f92672">:</span> dataEvents<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      DataItem dataItem <span style="color:#f92672">=</span> dataEvent<span style="color:#f92672">.</span><span style="color:#a6e22e">getDataItem</span><span style="color:#f92672">();</span>
      Uri dataItemUri <span style="color:#f92672">=</span> dataItem<span style="color:#f92672">.</span><span style="color:#a6e22e">getUri</span><span style="color:#f92672">();</span>
      <span style="color:#75715e">// the path is the one provided when sync the data with DataApi
</span><span style="color:#75715e"></span>      String path <span style="color:#f92672">=</span> dataItemUri<span style="color:#f92672">.</span><span style="color:#a6e22e">getPath</span><span style="color:#f92672">();</span>
      <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span><span style="color:#e6db74">&#34;/some/random/path&#34;</span><span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>path<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">continue</span><span style="color:#f92672">;</span>
      <span style="color:#f92672">}</span>
      <span style="color:#66d9ef">switch</span> <span style="color:#f92672">(</span>dataEvent<span style="color:#f92672">.</span><span style="color:#a6e22e">getType</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">case</span> DataEvent<span style="color:#f92672">.</span><span style="color:#a6e22e">TYPE_CHANGED</span><span style="color:#f92672">:</span>
          <span style="color:#75715e">// the data is created or updated
</span><span style="color:#75715e"></span>          <span style="color:#75715e">// note that if it is updated several times with the
</span><span style="color:#75715e"></span>          <span style="color:#75715e">// same data, this method won&#39;t be called
</span><span style="color:#75715e"></span>          <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">case</span> DataEvent<span style="color:#f92672">.</span><span style="color:#a6e22e">TYPE_DELETED</span><span style="color:#f92672">:</span>
          <span style="color:#75715e">// the data is deleted
</span><span style="color:#75715e"></span>          <span style="color:#75715e">// note that if the data is not deleted, it will be
</span><span style="color:#75715e"></span>          <span style="color:#75715e">// &#34;persisted&#34; until the application is removed
</span><span style="color:#75715e"></span>          <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
      <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
  <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div></p>

<p>And register it in your <code>AndroidManifest.xml</code>:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span style="color:#f92672">&lt;manifest</span> <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span>
          <span style="color:#a6e22e">package=</span><span style="color:#e6db74">&#34;net.zionsoft.sample&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">&lt;application&gt;</span>
    <span style="color:#f92672">&lt;service</span> <span style="color:#a6e22e">android:name=</span><span style="color:#e6db74">&#34;.MyWearableListenerService&#34;</span><span style="color:#f92672">&gt;</span>
      <span style="color:#f92672">&lt;intent-filter&gt;</span>
        <span style="color:#f92672">&lt;action</span> <span style="color:#a6e22e">android:name=</span><span style="color:#e6db74">&#34;com.google.android.gms.wearable.BIND_LISTENER&#34;</span><span style="color:#f92672">/&gt;</span>
      <span style="color:#f92672">&lt;/intent-filter&gt;</span>
    <span style="color:#f92672">&lt;/service&gt;</span>
  <span style="color:#f92672">&lt;/application&gt;</span>
<span style="color:#f92672">&lt;/manifest&gt;</span></code></pre></div></p>

<p>Alternatively, for an activity or a fragment, you can use <code>DataApi</code> or <code>MessageApi</code> to register a temporary listener.</p>

<p>Yep, that’s it. Quite straight forward to get your app running on the watch, happy hacking!</p>

        
          <div class="blog-tags">
            
              <a href="https://xizzhu.me//tags/android/">android</a>&nbsp;
            
              <a href="https://xizzhu.me//tags/google-play-services/">google-play-services</a>&nbsp;
            
          </div>
        

        

        
          
          
          <h4 class="see-also">See also</h4>
          <ul>
          
            <li><a href="/posts/2014-11-10-google-play-services-locations/">Play with Google Play Services - Locations</a></li>
          
            <li><a href="/posts/2014-02-26-google-play-services-push-notification-cloud-messaging/">Play with Google Play Services - Push Notification</a></li>
          
            <li><a href="/posts/2014-02-10-google-play-services-map/">Play with Google Play Services - Map</a></li>
          
          </ul>
          
        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://xizzhu.me/posts/2014-11-10-google-play-services-locations/" data-toggle="tooltip" data-placement="top" title="Play with Google Play Services - Locations">&larr; Previous Post</a>
            </li>
          
          
            <li class="next">
              <a href="https://xizzhu.me/posts/2015-06-02-android-ble-bluetooth/" data-toggle="tooltip" data-placement="top" title="BLE on Android">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      

    </div>
  </div>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="https://github.com/xizzhu" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://linkedin.com/in/xizhizhu" title="LinkedIn">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://stackoverflow.com/users/1664863/xizzhu" title="StackOverflow">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
        </ul>
        <p class="credits copyright text-muted">
          

          &nbsp;&bull;&nbsp;&copy;
          
            2016
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://xizzhu.me/">Xizhi Zhu</a>
          
        </p>
        <p class="credits theme-by text-muted">
          Powered by <a href="https://gohugo.io/">Hugo</a> and <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> heme, hosted by <a href="https://pages.github.com/">GitHub Pages</a>.
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha384-dq1/gEHSxPZQ7DdrM82ID4YVol9BYyU7GbWlIwnwyPzotpoc57wDw/guX8EaYGPx" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://xizzhu.me/js/main.js"></script><script> renderMathInElement(document.body); </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script>
<script src="https://xizzhu.me/js/load-photoswipe.js"></script>








  </body>
</html>

