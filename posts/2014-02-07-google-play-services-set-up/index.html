<!DOCTYPE html>
<html lang="en">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Play with Google Play Services - Set Up - Xizhi Zhu</title>
  <meta property="og:title" content="Play with Google Play Services - Set Up" />
  <meta name="twitter:title" content="Play with Google Play Services - Set Up" />
  <meta name="description" content="Google has offered a bunch of services that developers can use in their Android apps. In this and following few blog posts, we demonstrate how easy it is to use them. Now, let&rsquo;s get everything setup.
">
  <meta property="og:description" content="Google has offered a bunch of services that developers can use in their Android apps. In this and following few blog posts, we demonstrate how easy it is to use them. Now, let&rsquo;s get everything setup.
">
  <meta name="twitter:description" content="Google has offered a bunch of services that developers can use in their Android apps. In this and following few blog posts, we demonstrate how easy it is to use them. Now, let&rsquo;s get everything …">
  <meta name="author" content=""/>
  <link href='https://xizzhu.me/images/logo.png' rel='icon' type='image/x-icon'/>
  <meta property="og:image" content="https://xizzhu.me/images/logo.png" />
  <meta name="twitter:image" content="https://xizzhu.me/images/logo.png" />
  <meta name="twitter:card" content="summary" />
  <meta property="og:url" content="https://xizzhu.me/posts/2014-02-07-google-play-services-set-up/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Xizhi Zhu" />

  <meta name="generator" content="Hugo 0.50" />
  <link rel="alternate" href="https://xizzhu.me/index.xml" type="application/rss+xml" title="Xizhi Zhu">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://xizzhu.me/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" /><link rel="stylesheet" href="https://xizzhu.me/css/syntax.css" /><link rel="stylesheet" href="https://xizzhu.me/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-128400000-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


    <script type="application/ld+json"> {
  "@context" : "http://schema.org",
  "@type" : "BlogPosting",
  
  "name" : "Play with Google Play Services - Set Up",
  "headline" : "Play with Google Play Services - Set Up",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://xizzhu.me/posts/2014-02-07-google-play-services-set-up/"
  },
  "description" : "Google has offered a bunch of services that developers can use in their Android apps. In this and following few blog posts, we demonstrate how easy it is to use them. Now, let&amp;rsquo;s get everything setup. ",
  "inLanguage" : "en",
  
  "copyrightYear" : " - 2016",
  "datePublished": "2014-02-07T00:00:00-08:00",
  "dateModified": "2014-02-07T00:00:00-08:00",
  "url" : "https://xizzhu.me/posts/2014-02-07-google-play-services-set-up/",
  "wordCount" : "417",
  "image" : "https://xizzhu.me/images/logo.png",
  "keywords" : [ "android, google-play-services" ],
  "publisher" : {
    "@type": "Organization",
    "name" : "https://xizzhu.me/",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https://xizzhu.me/images/logo.png",
        "height" :  60 ,
        "width" :  60
    }
  }
} </script>
  
  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://xizzhu.me/">Xizhi Zhu</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Posts" href="/posts">Posts</a>
            </li>
          
        
          
            <li>
              <a title="Bible" href="/bible">Bible</a>
            </li>
          
        
          
            <li>
              <a title="随笔" href="/%e9%9a%8f%e7%ac%94">随笔</a>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="Xizhi Zhu" href="https://xizzhu.me/">
            <img class="avatar-img" src="https://xizzhu.me/images/logo.png" alt="Xizhi Zhu" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="posts-heading">
              
                <h1>Play with Google Play Services - Set Up</h1>
              
              
                <hr class="small">
              
              
              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <p>Google has offered a bunch of services that developers can use in their Android apps. In this and following few blog posts, we demonstrate how easy it is to use them. Now, let&rsquo;s get everything setup.
</p>

<h2 id="download-the-sdk">Download the SDK</h2>

<p>You can find Google Play services in the Extras section from your Android SDK Manager. Simply install it. If you also want to support Froyo (Android 2.2), also install Google Play services for Froyo.</p>

<p>After installation, you can find it at <em><android-sdk>/extras/google/google_play_services/</em>.</p>

<h2 id="configure-your-project">Configure Your Project</h2>

<p>Update the <em>build.gradle</em> file of the corresponding module, adding the following section:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-gradle" data-lang="gradle">dependencies <span style="color:#f92672">{</span>
    compile <span style="color:#e6db74">&#34;com.google.android.gms:play-services:4.1.32&#34;</span>
<span style="color:#f92672">}</span></code></pre></div></p>

<p>Then, update the AndroidManifest.xml file of the module, adding the following section:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;application&gt;</span>
    ...
    <span style="color:#f92672">&lt;meta-data</span>
        <span style="color:#a6e22e">android:name=</span><span style="color:#e6db74">&#34;com.google.android.gms.version&#34;</span>
        <span style="color:#a6e22e">android:value=</span><span style="color:#e6db74">&#34;@integer/google_play_services_version&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/application&gt;</span></code></pre></div></p>

<h2 id="check-if-the-device-has-google-play-services">Check If the Device Has Google Play Services</h2>

<p>Considering the variety of Android devices out in the market, it’s possible that the device doesn’t have the latest version of Google Play services you required, the user disables it, or it can be simply missing from from the device. Therefore, it’s best practice to check its availability:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Override</span>
<span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onResume</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">super</span><span style="color:#f92672">.</span><span style="color:#a6e22e">onResume</span><span style="color:#f92672">();</span>
 
    <span style="color:#75715e">// code that doesn&#39;t require Google Play services
</span><span style="color:#75715e"></span> 
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>checkGooglePlayServices<span style="color:#f92672">())</span>
        <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
 
    <span style="color:#75715e">// code that requires Google Play services
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
 
<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">checkGooglePlayServices</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> result <span style="color:#f92672">=</span> GooglePlayServicesUtil<span style="color:#f92672">.</span><span style="color:#a6e22e">isGooglePlayServicesAvailable</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">);</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>result <span style="color:#f92672">==</span> ConnectionResult<span style="color:#f92672">.</span><span style="color:#a6e22e">SUCCESS</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// the device has the latest Google Play services installed
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        Dialog errorDialog <span style="color:#f92672">=</span> GooglePlayServicesUtil<span style="color:#f92672">.</span><span style="color:#a6e22e">getErrorDialog</span><span style="color:#f92672">(</span>result<span style="color:#f92672">,</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">,</span> 8964<span style="color:#f92672">,</span>
            <span style="color:#66d9ef">new</span> DialogInterface<span style="color:#f92672">.</span><span style="color:#a6e22e">OnCancelListener</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                <span style="color:#a6e22e">@Override</span>
                <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onCancel</span><span style="color:#f92672">(</span>DialogInterface dialog<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    finish<span style="color:#f92672">();</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">});</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>errorDialog <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// the problem can be fixed
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// e.g. the user needs to enable or download the latest version
</span><span style="color:#75715e"></span>            errorDialog<span style="color:#f92672">.</span><span style="color:#a6e22e">show</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// for some reason, the problem can&#39;t be fixed
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// you should provide some notice to the user
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
 
<span style="color:#a6e22e">@Override</span>
<span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onActivityResult</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> requestCode<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> resultCode<span style="color:#f92672">,</span> Intent data<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// you don&#39;t have to check it here,
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// since the onResume() callback will be invoked anyway
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>requestCode <span style="color:#f92672">==</span> 8964<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// this is invoked when user finishes operation
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>resultCode <span style="color:#f92672">==</span> Activity<span style="color:#f92672">.</span><span style="color:#a6e22e">RESULT_OK</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// problem fixed, now you can use Google Play services
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// problem not fixed, e.g. user decides not to install the latest version
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">super</span><span style="color:#f92672">.</span><span style="color:#a6e22e">onActivityResult</span><span style="color:#f92672">(</span>requestCode<span style="color:#f92672">,</span> resultCode<span style="color:#f92672">,</span> data<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div></p>

<p><strong>Tip</strong>: You should make your app usable and requires it only when needed, if Google Play services is not a must-have feature.</p>

<p>Yep, that&rsquo;s it. Now you have Google Play services ready, have fun with it and keep reading ;)</p>

        
          <div class="blog-tags">
            
              <a href="https://xizzhu.me//tags/android/">android</a>&nbsp;
            
              <a href="https://xizzhu.me//tags/google-play-services/">google-play-services</a>&nbsp;
            
          </div>
        

        

        
          
          
          <h4 class="see-also">See also</h4>
          <ul>
          
            <li><a href="/posts/2013-09-09-display-image-efficiently-android/">Displaying Images Efficiently on Android</a></li>
          
          </ul>
          
        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://xizzhu.me/posts/2013-10-14-go-defer-statement-c/" data-toggle="tooltip" data-placement="top" title="Go’s defer statement in C&#43;&#43;">&larr; Previous Post</a>
            </li>
          
          
            <li class="next">
              <a href="https://xizzhu.me/posts/2014-02-10-google-play-services-map/" data-toggle="tooltip" data-placement="top" title="Play with Google Play Services - Map">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      

    </div>
  </div>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="https://github.com/xizzhu" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://linkedin.com/in/xizhizhu" title="LinkedIn">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://stackoverflow.com/users/1664863/xizzhu" title="StackOverflow">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
        </ul>
        <p class="credits copyright text-muted">
          

          &nbsp;&bull;&nbsp;&copy;
          
            2016
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://xizzhu.me/">Xizhi Zhu</a>
          
        </p>
        <p class="credits theme-by text-muted">
          Powered by <a href="https://gohugo.io/">Hugo</a> and <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> heme, hosted by <a href="https://pages.github.com/">GitHub Pages</a>.
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha384-dq1/gEHSxPZQ7DdrM82ID4YVol9BYyU7GbWlIwnwyPzotpoc57wDw/guX8EaYGPx" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://xizzhu.me/js/main.js"></script><script> renderMathInElement(document.body); </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script>
<script src="https://xizzhu.me/js/load-photoswipe.js"></script>








  </body>
</html>

