<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Play with Google Play Services - Map - Xizhi Zhu</title><meta name=description content="If you haven’t set up Google Play services yet, please follow this tutorial."><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Xizhi Zhu","url":"https:\/\/xizzhu.me\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/xizzhu.me\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/xizzhu.me\/","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"https:\/\/xizzhu.me\/post\/2014-02-10-google-play-services-map\/","name":"Play with google play services map"}}]}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","author":{"name":""},"headline":"Play with Google Play Services - Map","description":"If you haven’t set up Google Play services yet, please follow this tutorial.\n","inLanguage":"en","wordCount":1105,"datePublished":"2014-02-10T00:00:00","dateModified":"2014-02-10T00:00:00","image":"https:\/\/xizzhu.me\/images\/logo.png","keywords":["android, google-play-services"],"mainEntityOfPage":"https:\/\/xizzhu.me\/post\/2014-02-10-google-play-services-map\/","publisher":{"@type":"Organization","name":"https:\/\/xizzhu.me\/","logo":{"@type":"ImageObject","url":"https:\/\/xizzhu.me\/images\/logo.png","height":60,"width":60}}}</script><meta property="og:title" content="Play with Google Play Services - Map"><meta property="og:description" content="If you haven’t set up Google Play services yet, please follow this tutorial."><meta property="og:image" content="https://xizzhu.me/images/logo.png"><meta property="og:url" content="https://xizzhu.me/post/2014-02-10-google-play-services-map/"><meta property="og:type" content="website"><meta property="og:site_name" content="Xizhi Zhu"><meta name=twitter:title content="Play with Google Play Services - Map"><meta name=twitter:description content="If you haven’t set up Google Play services yet, please follow this tutorial."><meta name=twitter:image content="https://xizzhu.me/images/logo.png"><meta name=twitter:card content="summary"><link href=https://xizzhu.me/images/logo.png rel=icon type=image/x-icon><meta name=generator content="Hugo 0.80.0"><link rel=alternate href=https://xizzhu.me/index.xml type=application/rss+xml title="Xizhi Zhu"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css integrity=sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://xizzhu.me/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=https://xizzhu.me/css/syntax.css><link rel=stylesheet href=https://xizzhu.me/css/codeblock.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css integrity=sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css integrity=sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R crossorigin=anonymous><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-128400000-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button>
<a class=navbar-brand href=https://xizzhu.me/>Xizhi Zhu</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a title=Posts href=/post>Posts</a></li><li><a title=Bible href=/bible>Bible</a></li><li><a title=随笔 href=/%e9%9a%8f%e7%ac%94>随笔</a></li></ul></div><div class=avatar-container><div class=avatar-img-border><a title="Xizhi Zhu" href=https://xizzhu.me/><img class=avatar-img src=https://xizzhu.me/images/logo.png alt="Xizhi Zhu"></a></div></div></div></nav><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><h1>Play with Google Play Services - Map</h1><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;</span></div></div></div></div></div></header><div class=container role=main><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role=main class=blog-post><p>If you haven’t set up Google Play services yet, please follow <a href=/post/2014-02-07-google-play-services-set-up>this tutorial</a>.</p><h2 id=get-maps-api-key>Get Maps API Key</h2><p>First, create a project for your app in <a href=https://console.developers.google.com/project/>Google Developers Console</a>, and enable <em>Google Maps Android API v2</em>.</p><p>Then get you the signing certificate’s fingerprint:<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e># displays fingerprint of your debug certificate</span>
keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android
 
<span style=color:#75715e># displays fingerprint of your release certificate</span>
keytool -list -keystore &lt;your keystore&gt;</code></pre></div></p><p>Then use the SHA-1 fingerprint and your app’s package name to generate a new key for API access from Google Developers Console.</p><h2 id=update-androidmanifestxml>Update AndroidManifest.xml</h2><p>Now update your app&rsquo;s <em>AndroidManifest.xml</em> file, specifying the permissions, feature required, and the map key:<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;uses-permission</span> <span style=color:#a6e22e>android:name=</span><span style=color:#e6db74>&#34;android.permission.INTERNET&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;uses-permission</span> <span style=color:#a6e22e>android:name=</span><span style=color:#e6db74>&#34;android.permission.ACCESS_NETWORK_STATE&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;uses-permission</span> <span style=color:#a6e22e>android:name=</span><span style=color:#e6db74>&#34;android.permission.WRITE_EXTERNAL_STORAGE&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;uses-permission</span> <span style=color:#a6e22e>android:name=</span><span style=color:#e6db74>&#34;com.google.android.providers.gsf.permission.READ_GSERVICES&#34;</span><span style=color:#f92672>/&gt;</span>
 
<span style=color:#f92672>&lt;uses-feature</span>
        <span style=color:#a6e22e>android:glEsVersion=</span><span style=color:#e6db74>&#34;0x00020000&#34;</span>
        <span style=color:#a6e22e>android:required=</span><span style=color:#e6db74>&#34;true&#34;</span><span style=color:#f92672>/&gt;</span>
 
<span style=color:#f92672>&lt;application&gt;</span>
    <span style=color:#f92672>&lt;meta-data</span>
            <span style=color:#a6e22e>android:name=</span><span style=color:#e6db74>&#34;com.google.android.maps.v2.API_KEY&#34;</span>
            <span style=color:#a6e22e>android:value=</span><span style=color:#e6db74>&#34;your-map-key&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;/application&gt;</span></code></pre></div></p><h2 id=add-a-map>Add a Map</h2><p>The easiest way to show a map is to add a <code>MapFragment</code> (or a <code>SupportMapFragment</code> for older devices) to your activity. Another approach is to add a <code>MapView</code> to your activity or fragment.</p><p>To add a map view showing satellite maps with an XML file:<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span style=color:#f92672>&lt;com.google.android.gms.maps.MapView</span>
        <span style=color:#a6e22e>xmlns:android=</span><span style=color:#e6db74>&#34;http://schemas.android.com/apk/res/android&#34;</span>
        <span style=color:#a6e22e>xmlns:map=</span><span style=color:#e6db74>&#34;http://schemas.android.com/apk/res-auto&#34;</span>
        <span style=color:#a6e22e>android:id=</span><span style=color:#e6db74>&#34;@+id/map_view&#34;</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;match_parent&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;match_parent&#34;</span>
        <span style=color:#a6e22e>map:mapType=</span><span style=color:#e6db74>&#34;satellite&#34;</span> <span style=color:#f92672>/&gt;</span></code></pre></div></p><p>Then in your activity:<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MainActivity</span> <span style=color:#66d9ef>extends</span> Activity <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>private</span> MapView mMapView<span style=color:#f92672>;</span>
 
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onCreate</span><span style=color:#f92672>(</span>Bundle savedInstanceState<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>onCreate</span><span style=color:#f92672>(</span>savedInstanceState<span style=color:#f92672>);</span>
        setContentView<span style=color:#f92672>(</span>R<span style=color:#f92672>.</span><span style=color:#a6e22e>layout</span><span style=color:#f92672>.</span><span style=color:#a6e22e>activity_main</span><span style=color:#f92672>);</span>
 
        <span style=color:#75715e>// if you use a map fragment, it will take care of its life-cycle management
</span><span style=color:#75715e></span>        <span style=color:#75715e>// if you use a map view, you need to forward all the following events to it
</span><span style=color:#75715e></span>        mMapView <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>MapView<span style=color:#f92672>)</span> findViewById<span style=color:#f92672>(</span>R<span style=color:#f92672>.</span><span style=color:#a6e22e>id</span><span style=color:#f92672>.</span><span style=color:#a6e22e>map_view</span><span style=color:#f92672>);</span>
        mMapView<span style=color:#f92672>.</span><span style=color:#a6e22e>onCreate</span><span style=color:#f92672>(</span>savedInstanceState<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
 
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onResume</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>onResume</span><span style=color:#f92672>();</span>
 
        mMapView<span style=color:#f92672>.</span><span style=color:#a6e22e>onResume</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
 
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onPause</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        mMapView<span style=color:#f92672>.</span><span style=color:#a6e22e>onPause</span><span style=color:#f92672>();</span>
 
        <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>onPause</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
 
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onDestroy</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        mMapView<span style=color:#f92672>.</span><span style=color:#a6e22e>onDestroy</span><span style=color:#f92672>();</span>
 
        <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>onDestroy</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
 
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onSaveInstanceState</span><span style=color:#f92672>(</span>Bundle outState<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        mMapView<span style=color:#f92672>.</span><span style=color:#a6e22e>onSaveInstanceState</span><span style=color:#f92672>(</span>outState<span style=color:#f92672>);</span>
 
        <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>onSaveInstanceState</span><span style=color:#f92672>(</span>outState<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
 
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onLowMemory</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        mMapView<span style=color:#f92672>.</span><span style=color:#a6e22e>onLowMemory</span><span style=color:#f92672>();</span>
 
        <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>onLowMemory</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span></code></pre></div></p><h2 id=googlemap-object>GoogleMap Object</h2><p>Once you have the map ready, you can use the <code>getMap()</code> method (or the <code>getMapAsync()</code> to get reference to the map asynchronously) of the map view or fragment to get a <code>GoogleMap</code> object. If this method returns <code>null</code>, it means the map is not ready yet (e.g. because the Google Play services is not available). It serves as the entry point for interactions with the map:</p><ul><li>To configure the UI, e.g. show / hide my location button, enable / disable gestures, use the <code>UiSettings</code> object fetched using <code>GoogleMap.getUiSettings()</code> method.</li><li>To convert between coordinates on the map and the location on the screen, use the <code>Projection</code> object fetched using <code>GoogleMap.getProjection()</code> method.</li><li>You can uses <code>GoogleMap.setMyLocationEnabled()</code> method to show or hide the blue dot representing device&rsquo;s current location.</li><li>To listen to map click events, you can simply set the corresponding listener using <code>GoogleMap.setOnMapClickListener()</code> or <code>GoogleMap.setOnMapLongClickListener()</code> method.</li><li>You can set the camera (i.e. which part of the map should be shown) using the <code>GoogleMap.animateCamera()</code> (with animation) or <code>GoogleMap.moveCamera()</code> (no animation) method. To listener to camera changes (e.g. triggered by user), you can specify the corresponding listener using <code>GoogleMap.setOnCameraChangeListener()</code>.</li></ul><p>Also, you can set map types (normal, satellite, etc.), enable / disable indoor maps, 3D buildings, etc. using the <code>GoogleMap</code> object.</p><h2 id=markers-and-info-windows>Markers and Info Windows</h2><p>Markers can be used to indicate locations or other important information on the map, with more detailed information shown in the info window.</p><p>The following snippet adds a marker with a custom icon to the map, and displays a default info window showing “Hello, Helsinki!”:<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#a6e22e>@Override</span>
<span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onResume</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
    <span style=color:#f92672>...</span>
    mGoogleMap <span style=color:#f92672>=</span> mMapView<span style=color:#f92672>.</span><span style=color:#a6e22e>getMap</span><span style=color:#f92672>();</span>
    BitmapDescriptor bitmap <span style=color:#f92672>=</span> <span style=color:#f92672>...</span>
    Marker addedMarker <span style=color:#f92672>=</span> mGoogleMap<span style=color:#f92672>.</span><span style=color:#a6e22e>addMarker</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> MarkerOptions<span style=color:#f92672>()</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>position</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> LatLng<span style=color:#f92672>(</span>60<span style=color:#f92672>.</span><span style=color:#a6e22e>1708</span><span style=color:#f92672>,</span> 24<span style=color:#f92672>.</span><span style=color:#a6e22e>9375</span><span style=color:#f92672>))</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>title</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Hello, Helsinki&#34;</span><span style=color:#f92672>)</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>icon</span><span style=color:#f92672>(</span>BitmapDescriptorFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>fromBitmap</span><span style=color:#f92672>(</span>bitmap<span style=color:#f92672>)));</span>
<span style=color:#f92672>}</span></code></pre></div></p><p>One thing to note when using e.g. <code>BitmapDescriptorFactory</code> is, you might need to use <code>MapsInitializer</code> to explicitly initialize the map.</p><p>To remove a marker, you can use the <code>Marker.remove()</code> method, or the <code>GoogleMap.clear()</code> method to remove all added markers, shapes, etc.</p><p>If you want to animate a marker on the map (e.g. use a custom marker to indicate current location instead of the boring blue dot), all you need is simply update its position periodically using the <code>Marker.setPosition()</code> method.</p><p>When the user clicks on a marker, by default it shows an info window with some title and snippet defined when the marker was added. But you can also listen to the click event:<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>mGoogleMap<span style=color:#f92672>.</span><span style=color:#a6e22e>setOnMarkerClickListener</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> GoogleMap<span style=color:#f92672>.</span><span style=color:#a6e22e>OnMarkerClickListener</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>onMarkerClick</span><span style=color:#f92672>(</span>Marker marker<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#f92672>...</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>});</span></code></pre></div></p><p>If the <code>onMarkerClick()</code> method returns true, it means the click event has been consumed. Otherwise, if false is returned, it will execute the default behavior, i.e. moving the camera to the marker, and showing the info window.</p><p>To provide a customized info window:<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>mGoogleMap<span style=color:#f92672>.</span><span style=color:#a6e22e>setInfoWindowAdapter</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> GoogleMap<span style=color:#f92672>.</span><span style=color:#a6e22e>InfoWindowAdapter</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> View <span style=color:#a6e22e>getInfoWindow</span><span style=color:#f92672>(</span>Marker marker<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>// this will be first called
</span><span style=color:#75715e></span>        <span style=color:#75715e>// the returned view will be used as the entire info window
</span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>
 
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> View <span style=color:#a6e22e>getInfoContents</span><span style=color:#f92672>(</span>Marker marker<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>// this will only be called if getInfoWindow() returns null
</span><span style=color:#75715e></span>        <span style=color:#75715e>// the returned view will be used inside the default info window frame
</span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>
<span style=color:#f92672>});</span></code></pre></div></p><p>The info window is <strong>rendered as an image</strong>. It means any subsequent changes won’t be visible unless you re-open the info window, and the info window can only listen to one click event for the whole info window.</p><h2 id=circles-polygons-and-polylines>Circles, Polygons, and Polylines</h2><p>To add those shapes to the map, you basically follow the same pattern:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>Circle addedCircle <span style=color:#f92672>=</span> mGoogleMap<span style=color:#f92672>.</span><span style=color:#a6e22e>addCircle</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> CircleOptions<span style=color:#f92672>()</span>
    <span style=color:#f92672>.</span><span style=color:#a6e22e>center</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> LatLng<span style=color:#f92672>(</span>60<span style=color:#f92672>.</span><span style=color:#a6e22e>1708</span><span style=color:#f92672>,</span> 24<span style=color:#f92672>.</span><span style=color:#a6e22e>9375</span><span style=color:#f92672>))</span>
    <span style=color:#f92672>.</span><span style=color:#a6e22e>radius</span><span style=color:#f92672>(</span>1000<span style=color:#f92672>));</span>
 
<span style=color:#75715e>// when adding a polygon, the system will automatically connect the
</span><span style=color:#75715e>// last coordinate to the first one
</span><span style=color:#75715e></span>Polygon addedPolygon <span style=color:#f92672>=</span> mGoogleMap<span style=color:#f92672>.</span><span style=color:#a6e22e>addPolygon</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> PolygonOptions<span style=color:#f92672>()</span>
    <span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> LatLng<span style=color:#f92672>(</span>60<span style=color:#f92672>,</span> 24<span style=color:#f92672>),</span> <span style=color:#66d9ef>new</span> LatLng<span style=color:#f92672>(</span>61<span style=color:#f92672>,</span> 24<span style=color:#f92672>),</span> <span style=color:#66d9ef>new</span> LatLng<span style=color:#f92672>(</span>61<span style=color:#f92672>,</span> 25<span style=color:#f92672>),</span> <span style=color:#66d9ef>new</span> LatLng<span style=color:#f92672>(</span>60<span style=color:#f92672>,</span> 25<span style=color:#f92672>));</span>
 
<span style=color:#75715e>// the system won&#39;t automatically connect the coordinates
</span><span style=color:#75715e>// thus you can see the difference compared to the above polygon
</span><span style=color:#75715e></span>Polyline addedPolyline <span style=color:#f92672>=</span> mGoogleMap<span style=color:#f92672>.</span><span style=color:#a6e22e>addPolyline</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> PolylineOptions<span style=color:#f92672>()</span>
    <span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> LatLng<span style=color:#f92672>(</span>60<span style=color:#f92672>,</span> 24<span style=color:#f92672>),</span> <span style=color:#66d9ef>new</span> LatLng<span style=color:#f92672>(</span>61<span style=color:#f92672>,</span> 24<span style=color:#f92672>),</span> <span style=color:#66d9ef>new</span> LatLng<span style=color:#f92672>(</span>61<span style=color:#f92672>,</span> 25<span style=color:#f92672>),</span> <span style=color:#66d9ef>new</span> LatLng<span style=color:#f92672>(</span>60<span style=color:#f92672>,</span> 25<span style=color:#f92672>));</span></code></pre></div><h2 id=ground-and-tile-overlays>Ground and Tile Overlays</h2><p>The main difference between these two overlays is: the <strong>ground overlay</strong> provides a single image for a fixed location on the map, while the <strong>tile overlay</strong> provides a set of images for different locations at different zoom level on the map.</p><p>To add a ground overlay:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>GroundOverlay addedGroundOverlay <span style=color:#f92672>=</span> mGoogleMap<span style=color:#f92672>.</span><span style=color:#a6e22e>addGroundOverlay</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> GroundOverlayOptions<span style=color:#f92672>()</span>
    <span style=color:#f92672>.</span><span style=color:#a6e22e>image</span><span style=color:#f92672>(</span>bitmap<span style=color:#f92672>)</span>
    <span style=color:#f92672>.</span><span style=color:#a6e22e>anchor</span><span style=color:#f92672>(</span>0<span style=color:#f92672>.</span><span style=color:#a6e22e>5</span><span style=color:#f92672>,</span> 0<span style=color:#f92672>.</span><span style=color:#a6e22e>5</span><span style=color:#f92672>)</span>
    <span style=color:#f92672>.</span><span style=color:#a6e22e>position</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> LatLng<span style=color:#f92672>(</span>60<span style=color:#f92672>.</span><span style=color:#a6e22e>1708</span><span style=color:#f92672>,</span> 24<span style=color:#f92672>.</span><span style=color:#a6e22e>9375</span><span style=color:#f92672>),</span> 100<span style=color:#f92672>,</span> 100<span style=color:#f92672>));</span></code></pre></div><p>To add a tile overlay:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>TileProvider tileProvider <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> TileProvider<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> Tile <span style=color:#a6e22e>getTile</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> x<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> y<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> zoom<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>// a Tile object consists of raw image data, as well its width and height
</span><span style=color:#75715e></span>        <span style=color:#75715e>// the map is divided into a 2^zoom x 2^zoom grid
</span><span style=color:#75715e></span>        <span style=color:#75715e>// for each grid, the system targets 256 x 256 dp
</span><span style=color:#75715e></span>        <span style=color:#75715e>// if TileProvider.NO_TILE is returned,
</span><span style=color:#75715e></span>        <span style=color:#75715e>// it means you don&#39;t want to provide tiles yourself
</span><span style=color:#75715e></span>        <span style=color:#75715e>// if null is returned, it means the tile could not be found now,
</span><span style=color:#75715e></span>        <span style=color:#75715e>// and will be tried again later
</span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>
<span style=color:#f92672>};</span>
TileOverlay addedTileOverlay <span style=color:#f92672>=</span> mGoogleMap<span style=color:#f92672>.</span><span style=color:#a6e22e>addTileOverlay</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> TileOverlayOptions<span style=color:#f92672>()</span>
    <span style=color:#f92672>.</span><span style=color:#a6e22e>tileProvider</span><span style=color:#f92672>(</span>tileProvider<span style=color:#f92672>));</span></code></pre></div><p>That’s it for today. Happy hacking :)</p><div class=blog-tags><a href=https://xizzhu.me//tags/android/>android</a>&nbsp;
<a href=https://xizzhu.me//tags/google-play-services/>google-play-services</a>&nbsp;</div><hr><section id=social-share><div class="list-inline footer-links"><div class=share-box aria-hidden=true><ul class=share><li><a href="//twitter.com/share?url=https%3a%2f%2fxizzhu.me%2fpost%2f2014-02-10-google-play-services-map%2f&text=Play%20with%20Google%20Play%20Services%20-%20Map&via=" target=_blank title="Share on Twitter"><i class="fab fa-twitter"></i></a></li><li><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fxizzhu.me%2fpost%2f2014-02-10-google-play-services-map%2f" target=_blank title="Share on Facebook"><i class="fab fa-facebook"></i></a></li><li><a href="//reddit.com/submit?url=https%3a%2f%2fxizzhu.me%2fpost%2f2014-02-10-google-play-services-map%2f&title=Play%20with%20Google%20Play%20Services%20-%20Map" target=_blank title="Share on Reddit"><i class="fab fa-reddit"></i></a></li><li><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fxizzhu.me%2fpost%2f2014-02-10-google-play-services-map%2f&title=Play%20with%20Google%20Play%20Services%20-%20Map" target=_blank title="Share on LinkedIn"><i class="fab fa-linkedin"></i></a></li><li><a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fxizzhu.me%2fpost%2f2014-02-10-google-play-services-map%2f&title=Play%20with%20Google%20Play%20Services%20-%20Map" target=_blank title="Share on StumbleUpon"><i class="fab fa-stumbleupon"></i></a></li><li><a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fxizzhu.me%2fpost%2f2014-02-10-google-play-services-map%2f&description=Play%20with%20Google%20Play%20Services%20-%20Map" target=_blank title="Share on Pinterest"><i class="fab fa-pinterest"></i></a></li></ul></div></div></section><h4 class=see-also>See also</h4><ul><li><a href=/post/2020-07-25-dependency-injection-hilt/>Dependency Injection with Hilt</a></li><li><a href=/post/2020-05-18-android-activity-service-communication/>Different ways Activities communicating with Services on Android</a></li><li><a href=/post/2020-05-14-android-getsystemservice/>How Android apps get handles to system services</a></li><li><a href=/post/2020-05-09-android-looper-handler/>Loopers and Handlers in Android</a></li><li><a href=/post/2019-02-21-shared-preferences-android/>What You Should Know About SharedPreferences</a></li></ul></article><ul class="pager blog-pager"><li class=previous><a href=https://xizzhu.me/post/2014-02-07-google-play-services-set-up/ data-toggle=tooltip data-placement=top title="Play with Google Play Services - Set Up">&larr; Previous Post</a></li><li class=next><a href=https://xizzhu.me/post/2014-02-26-google-play-services-push-notification-cloud-messaging/ data-toggle=tooltip data-placement=top title="Play with Google Play Services - Push Notification">Next Post &rarr;</a></li></ul></div></div></div><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href=https://github.com/xizzhu title=GitHub><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i><i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://linkedin.com/in/xizhizhu title=LinkedIn><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i><i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://stackoverflow.com/users/1664863/xizzhu title=StackOverflow><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i><i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="credits copyright text-muted">&nbsp;&bull;&nbsp;&copy;
2020
&nbsp;&bull;&nbsp;
<a href=https://xizzhu.me/>Xizhi Zhu</a></p><p class="credits theme-by text-muted">Powered by <a href=https://gohugo.io/>Hugo</a> and <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> heme, hosted by <a href=https://pages.github.com/>GitHub Pages</a>.</p></div></div></div></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js integrity=sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js integrity=sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe crossorigin=anonymous></script><script src=https://code.jquery.com/jquery-1.12.4.min.js integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin=anonymous></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script><script src=https://xizzhu.me/js/main.js></script><script>renderMathInElement(document.body);</script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js integrity=sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js integrity=sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q crossorigin=anonymous></script><script src=https://xizzhu.me/js/load-photoswipe.js></script></body></html>